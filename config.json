{
    "general":{
        "hostname":""
    },
    "metrics":{
        "enabled":true,
        "debug":true,
        "metrics_port":9095,
        "target_gateway":"localhost:9091",
        "job_name":"signifier",
        "push_period":1,
        "timeout":0.1
    },
    "mapping":{
        "enabled":true,
        "debug":false,
        "rules":
        [
            {
                "source":{
                    "module":"analysis",
                    "param":"peak",
                    "range":[0, 1]
                },
                "destination":{
                    "module":"leds",
                    "param":"brightness",
                    "range":[0, 1],
                    "duration":100
                }
            }
        ]
    },
    "leds":{
        "enabled":true,
        "debug":false,
        "port":"/dev/ttyACM0",
        "baud":38400,
        "start_delay":2,
        "update_ms":30,
        "duration_multiplier":3,
        "destinations":{
            "update_ms":{"command":"l", "min":10, "max":200, "default":30,
                "description":"Target Arduino loop length in ms."},
            "brightness":{"command":"B", "min":3, "max":255, "default":0,
                "description":"Brightness scaling of entire LED strip."},
            "saturation":{"command":"S", "min":0, "max":255, "default":0,
                "description":"Colour saturation of future pixel writes."},
            "hue":{"command":"H", "min":0, "max":255, "default":195,
                "description":"Hue value of future pixel writes."},
            "noise":{"command":"N", "min":0, "max":255, "default":0,
                "description":"Amount of white pixel noise blended over the strip."}
        }
    },
    "bluetooth":{
        "enabled":true,
        "debug":false,
        "start_delay":2,
        "scan_dur":3,
        "signal_threshold":0.002,
        "remove_after":15,
        "sources":{
            "num_devices":{"enabled":true,
                "description":"Total number of nearby BLE devices."},
            "signal_total":{"enabled":true,
                "description":"Sum of nearby BLE signal strengths."},
            "signal_mean":{"enabled":true,
                "description":"Mean of nearby BLE signal strengths."},
            "signal_std":{"enabled":true,
                "description":"Standard deviation of BLE signal strength."},
            "signal_max":{"enabled":true,
                "description":"Value of strongest BLE device signal."},
            "activity_total":{"enabled":true,
                "description":"Total absolute difference of BLE device signals each tick."},
            "activity_mean":{"enabled":true,
                "description":"Average activity of nearby BLE devices."},
            "activity_std":{"enabled":true,
                "description":"Standard deviation of BLE device activity."},
            "activity_max":{"enabled":true,
                "description":"Activity value of most active BLE device."}
        }
    },
    "analysis":{
        "enabled":true,
        "debug":false,
        "input_device":"default",
        "sample_rate":48000,
        "dtype":"int16",
        "buffer":4096,
        "latency":0.1,
        "gain":1.0,
        "sources":{
            "peak":{"enabled":true, "smooth":0.5,
                "description":"Peak amplitude of audio signal in each buffer."}
        }
    },
    "composition":{
        "enabled":true,
        "debug":false,
        "output_device":"default",
        "sample_rate":48000,
        "bit_size":-16,
        "buffer":2048,
        "base_path":"/home/pi/Signifier/audio_3",
        "force_collection":null,
        "valid_extensions":[".wav"],
        "strict_distribution":false,
        "volume":0.7,
        "fade_in":2000,
        "fade_out":3000,
        "max_playtime":60,
        "default_pool_size":12,
        "destinations":{
            "volume_main":{"min":0.1, "max":1.0, "default":0.7,
                "description":"Overall volume of the audio output."},
            "volume_speed":{"min":0, "max":10, "default":5,
                "description":"Volume job's rate of modulation."},
            "volume_weight":{"min":-1.0, "max":1.0, "default":0,
                "description":"Volume job's weighting: negative/positive = softer/louder."},
            "target_level":{"min":1, "max":8, "default":3,
                "description":"Target number of concurrent audio clips (composition 'business'."}
        },
        "sources":{
            "current_collection":{"enabled":true,
                "description":"Index of active audio clip collection."},
            "channels_volume":{"enabled":true,
                "description":"Current mixer channel volumes."},
            "channels_playing":{"enabled":true,
                "description":"Channels current playing clips."},
            "channels_loop_num":{"enabled":true,
                "description":"Array representing number of loops each clip will play."},
            "channels_playtime":{"enabled":true,
                "description":"Array of current playtime of each channel ."}
        },
        "categories":{
            "oneshot":{"threshold":0, "is_loop":false, "loop_range":[4,8]},
            "short":{"threshold":5, "is_loop":false, "loop_range":[2,4]},
            "medium":{"threshold":10, "is_loop":false, "loop_range":[2,4]},
            "loop":{"threshold":30, "is_loop":false, "loop_range":[0,2]}
        },
        "jobs":{
            "collection":{
                "enabled":true,
                "timer":64,
                "fail_retry_delay":5,
                "parameters": {"pool_size":12, "start_clips":1,
                    "collections":[]},
                "description":"Schedule to change the active collection."
            },
            "clip_selection":{
                "enabled":true,
                "timer":16,
                "parameters": {"quiet_level":3, "busy_level":8},
                "description":"Schedule add/subtract active clips based on target 'level'."
            },
            "volume":{
                "enabled":true,
                "timer":1,
                "parameters": {"speed":5, "weight":0},
                "description":"Schedule to random modulate volume levels of active clips."
            }
        }
    }
}